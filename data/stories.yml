version: "2.0"

stories:
# TODO: Turn this into rule once SSO/action session start has been done
- story: General - First Time Meeting - Happy Path
  steps:
  - intent: greet
  - action: utter_greet_first_time
  - action: utter_greet_first_time_1
  - action: first_time_form
  - active_loop: first_time_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: user_name
  - slot_was_set:
    - user_name: mahima
  - slot_was_set:
    - requested_slot: age
  - slot_was_set:
    - age: 8
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: utter_first_time_confirm
  - intent: affirm
  - action: utter_lesson_options

- story: Fraction - Halves -> Parts
  steps:
  - action: utter_lesson_options
  - intent: lesson_fractions
  - action: utter_fractions_halves_introduction
  - action: fractions_halves_story_form
  - active_loop: fractions_halves_story_form
  - active_loop: null
  - action: utter_fractions_halves_conclusion
  - action: utter_fractions_halves_conclusion_animation
  - action: utter_ask_start_next
  - intent: affirm
  - action: fractions_parts_story_form
  - active_loop: fractions_parts_story_form
  - active_loop: null
  - action: utter_fractions_parts_conclusion
  - action: utter_ask_start_next
  - intent: affirm
  - action: utter_fractions_wholes_introduction
  - action: utter_fractions_wholes_introduction_hint
  - action: fractions_wholes_story_form
  - active_loop: fractions_wholes_story_form
  - active_loop: null

- story: Fractions - Parts -> Wholes 
  steps:
  - action: utter_fractions_parts_conclusion
  - action: utter_ask_start_next
  - intent: affirm
  - action: utter_fractions_wholes_introduction
  - action: utter_fractions_wholes_introduction_hint
  - action: fractions_wholes_story_form
  - active_loop: fractions_wholes_story_form
  - active_loop: null
  - action: utter_fractions_wholes_conclusion
  - action: utter_fractions_wholes_conclusion_1
  - action: utter_fractions_wholes_conclusion_2
  - action: utter_fractions_wholes_conclusion_3

- story: General - Exit at End of Lesson 
  steps:
  - action: utter_ask_start_next
  - or:
    - intent: deny 
    - intent: stop
  - action: utter_ask_confirm
  - intent: affirm
  - action: action_listen
   